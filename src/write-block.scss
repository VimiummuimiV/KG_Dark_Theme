// Forum
#content td.write,
// Vocabulary
#content dl.write {
  overflow: hidden !important;
  z-index: 1010 !important;
  position: fixed !important;
  border: 1px solid $lightblue !important;
  top: 50% !important;
  right: 0 !important;
  height: 50px !important;
  width: 50px !important;
  background: $black $show-write-block center / 32px !important;
  transform: translateY(-50%) !important;
  transition: height 0.15s ease, width 0.25s ease !important;
  cursor: pointer !important;

  // Content should be hidden initially
  #write-block {
    opacity: 0 !important;
  }

  &:hover #write-block,
  &:focus-within #write-block {
    opacity: 1 !important;
  }

  &:hover,
  &:focus,
  &:focus-within {
    width: 40vw !important;
    height: 80vh !important;
    overflow: visible !important;
    background: $black !important;
    cursor: default !important;
  }

  textarea {
    margin: 10px 0 !important;
    resize: none !important;
    height: calc(80vh - 110px) !important;
    border-radius: 5px !important;
    padding: 10px !important;
    background-color: $black !important;
    border: 1px solid $gray !important;
    font-family: "Montserrat", Verdana, Geneva, Tahoma, sans-serif !important;
    font-size: 1.2em !important;
  }

  // Button container styling
  p:has(input) {
    display: flex !important;
    position: absolute !important;
    margin: 0 !important;
    padding: 0 !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;

    input {
      border: none !important;
      color: $white !important;
      width: 50% !important;
      height: 40px !important;
      color: $black !important;
      transition: background-color 0.15s ease !important;
      font-family: "Montserrat", Verdana, Geneva, Tahoma, sans-serif !important;
      font-weight: 700 !important;
      text-transform: uppercase !important;
    }

    input[name="send"] {
      border-right: 1px solid $black !important;
      background: $gray $send-icon no-repeat 15px center / 24px !important;

      &:hover {
        background-color: $blue !important;
      }
    }

    input[name="preview"] {
      background: $gray $preview-icon no-repeat 15px center / 24px !important;

      &:hover {
        background-color: $blue !important;
      }
    }
  }

  .g-recaptcha {
    position: absolute !important;
    padding-top: 10px !important;
    bottom: 0 !important;
    left: -2px !important;
    transform: translateY(100%) !important;
  }

  div[style*="#e00"] {
    position: absolute !important;
    bottom: -20px !important;
    font-weight: bold !important;
  }
}

/* Posts-list repositioning: When write block gains focus (user interacts with form),
   shrink posts-list to 60% width and position it absolutely to make room for the expanded write panel
   This only triggers on focus-within (actual interaction), not on hover */
body:has(td.write:focus-within) #posts-list,
body:has(dl.write:focus-within) #posts-list {
  position: absolute !important;
  left: 10px !important;
  width: calc(60vw - 50px) !important;
  transition: width 0.25s ease, left 0.25s ease !important;
}

#posts-list {
  // Smooth transitions for width and position changes when write block is focused/unfocused
  transition: width 0.25s ease, left 0.25s ease !important;
}
