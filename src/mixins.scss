// Add avatar mask to make fake border-radius
@mixin avatar-mask($dimensions: 32px, $color: transparent) {
  content: "";
  position: absolute;
  left: 0;
  width: $dimensions;
  height: $dimensions;
  background-image: url('data:image/svg+xml;utf8,<svg width="100%" height="100%" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><path fill="#{$color}" d="M24,0l0,24l-24,0l0,-24l24,0Zm-0.944,4.26c0,-1.828 -1.488,-3.316 -3.316,-3.316l-15.48,0c-1.828,0 -3.316,1.488 -3.316,3.316l0,15.48c0,1.828 1.488,3.316 3.316,3.316l15.48,0c1.828,0 3.316,-1.488 3.316,-3.316l0,-15.48Z"/></svg>');
  background-position: left center;
  background-size: $dimensions;
}

// Parameterized mixin for different orientations:
@mixin content-reposition-focused($orientation: "portrait") {
  @if $orientation == "portrait" {
    left: auto !important;
    width: auto !important;

    #posts-list,
    #profile-block {
      padding-bottom: 40vh !important;
    }
  } @else {
    // Landscape orientation (desktop) - use original behavior
    position: absolute !important;
    left: 10px !important;
    width: calc(60vw - 50px) !important;
  }
}

// Position element in the parent container full width and height
@mixin element-full-size() {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

// Flexbox layout mixin with optional !important control
@mixin flex-layout(
  $direction: column,
  $justify: center,
  $align: center,
  $important: true
) {
  $imp: if($important, !important, null);
  display: flex #{$imp};
  flex-direction: $direction #{$imp};
  justify-content: $justify #{$imp};
  align-items: $align #{$imp};
}

@mixin post-header-button($bg-color, $border-radius: 0 5px 5px 0) {
  font-size: 12px !important;
  font-weight: bold !important;
  text-decoration: none !important;
  position: absolute !important;
  right: 0 !important;
  top: 0 !important;
  width: 100px !important;
  height: 100% !important;
  color: $black !important;
  @include flex-layout();
  background: darken($bg-color, 10%) !important;
  border-radius: $border-radius !important;
  transition: background 0.1s ease-in-out;

  &:hover {
    background: $bg-color !important;
  }
}

@mixin rounded-button($margin: 10px, $bg-hover: $blue) {
  height: 35px !important;
  width: 35px !important;
  border-radius: 50% !important;
  font-size: 0 !important;
  margin: $margin !important;
  background-color: $gray !important;
  background-position: center !important;
  background-repeat: no-repeat !important;
  border: none !important;
  transition: background-color 0.1s ease-in-out;
  @include flex-layout();

  &:hover {
    background-color: $bg-hover !important;
  }
}

@mixin anchor-to-button($font-size: 16px, $width: fit-content) {
  @include flex-layout(row, start, center);
  cursor: pointer !important;
  text-decoration: none !important;
  color: $black !important;
  background: $gray !important;
  min-height: 30px !important;
  width: $width !important;
  border-radius: 5px !important;
  padding: 5px 10px !important;
  font: 600 $font-size "Montserrat", Verdana, Geneva, Tahoma, sans-serif !important;
  white-space: break-spaces !important;
  transition: background 0.1s ease-in-out;

  &:hover {
    background: $blue !important;
  }
}

@mixin send-preview-buttons() {
  input {
    border: none !important;
    width: 50% !important;
    height: 40px !important;
    color: $black !important;
    transition: background-color 0.15s ease !important;
    font-family: "Montserrat", Verdana, Geneva, Tahoma, sans-serif !important;
    font-weight: 700 !important;
    text-transform: uppercase !important;
    font-size: 14px !important;
  }

  input[name="send"] {
    border-radius: 5px 0 0 5px !important;
    border-right: 1px solid $black !important;
    background: $gray icon("send", $black) no-repeat 15px center / 24px !important;

    &:hover {
      background-color: $blue !important;
    }
  }

  input[name="preview"] {
    border-radius: 0 5px 5px 0 !important;
    background: $gray icon("eye", $black) no-repeat 15px center / 24px !important;

    &:hover {
      background-color: $blue !important;
    }
  }

  @media (max-width: 500px) {
    input {
      height: 32px !important;
      font-size: 11px !important;
    }

    input[name="send"] {
      background-size: 18px !important;
      background-position: 10px center !important;
    }

    input[name="preview"] {
      background-size: 18px !important;
      background-position: 10px center !important;
    }
  }

  @media (max-width: 400px) {
    input[name="send"],
    input[name="preview"] {
      width: 100% !important;
      border-radius: 5px !important;
      border: none !important;
    }
  }
}

// Login form input field mixin
@mixin login-input-field($bg-icon: none, $margin-bottom: 0) {
  color: $white !important;
  background: $darkgray !important;
  border: none !important;
  background-color: $deepgray !important;
  height: 45px !important;
  padding: 10px !important;
  color: $blue !important;
  text-align: center !important;
  width: 100% !important;
  margin-bottom: $margin-bottom !important;

  @if $bg-icon != none {
    background-image: $bg-icon !important;
    background-position: 10px center !important;
    background-repeat: no-repeat !important;
    background-size: 20px !important;
  }

  &:active,
  &:focus {
    color: $lightblue !important;
    background-color: $black !important;
    transition: background-color 0.3s ease-in-out !important;
  }
}

// Mixin for collapsible panels that start as icon buttons and expand on hover (race settings, invite friends)
@mixin collapsible-panel(
  $order: 0,
  $icon: null,
  $icon-color: $lightblue,
  $size: 50px,
  $gap: 10px,
  $expanded-width: 300px,
  $background: $black,
  $transition-duration: 0.15s,
  $content-transition-duration: 0.3s,
  $content-transition-delay: 0.05s
) {
  margin: 0 !important;
  padding: 0 !important;
  border-radius: 0 5px 5px 0 !important;
  color: $white !important;
  position: absolute !important;
  top: #{$order * ($size + $gap)} !important;
  width: $size;
  height: $size;
  overflow: hidden !important;
  min-width: unset !important;
  max-width: 300px !important;
  transition: width $transition-duration ease-in-out,
    height $transition-duration ease-in-out !important;

  @if $icon {
    background: $background
      icon($icon, $icon-color)
      no-repeat
      center /
      24px !important;
  } @else {
    background: $background !important;
  }

  // Hide content by default
  & * {
    opacity: 0 !important;
    transition: opacity $content-transition-duration ease-in-out !important;
  }

  // Expand on hover
  &:hover {
    width: $expanded-width !important;
    height: auto !important;
    background: $background !important;

    & * {
      opacity: 1 !important;
      transition: opacity $content-transition-duration ease-in-out
        $content-transition-delay !important;
    }
  }
}