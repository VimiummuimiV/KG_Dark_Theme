@import "../mixins";
@import "../animations";

// mixin for post action button styling
@mixin post-header-button($bg-color, $border-radius: 0 5px 5px 0) {
  font-size: 12px !important;
  font-weight: bold !important;
  text-decoration: none !important;
  position: absolute !important;
  right: 0 !important;
  top: 0 !important;
  width: 100px !important;
  height: 100% !important;
  color: $black !important;
  @include flex-layout();
  background: darken($bg-color, 10%) !important;
  border-radius: $border-radius !important;
  transition: background 0.1s ease-in-out;

  &:hover {
    background: $bg-color !important;
  }
}

@mixin rounded-button($margin: 10px, $bg-hover: $blue) {
  height: 35px !important;
  width: 35px !important;
  border-radius: 50% !important;
  font-size: 0 !important;
  margin: $margin !important;
  background-color: $gray !important;
  background-position: center !important;
  background-repeat: no-repeat !important;
  border: none !important;
  transition: background-color 0.1s ease-in-out;
  @include flex-layout();

  &:hover {
    background-color: $bg-hover !important;
  }
}

@mixin anchor-to-button($font-size: 14px) {
  @include flex-layout(row);
  cursor: pointer !important;
  text-decoration: none !important;
  color: $black !important;
  background: $gray !important;
  height: 30px !important;
  width: fit-content !important;
  border-radius: 5px !important;
  padding: 5px 10px !important;
  font-weight: bold !important;
  font-size: $font-size !important;
  transition: background 0.1s ease-in-out;

  &:hover {
    background: $blue !important;
  }
}

#content {
  #posts-list {
    margin-top: 5px !important;
    font-family: "Montserrat", Verdana, Geneva, Tahoma, sans-serif !important;

    .forum-up {
      @include flex-layout(row);
      margin-bottom: 10px !important;

      a[href*="/forum/"] {
        @include anchor-to-button(0px);

        span {
          font-size: 14px !important;
          text-decoration: none !important;
        }
      }
    }

    h4 {
      noindex {
        @include flex-layout(row);
        gap: 10px !important;
      }

      a[href*="/forum/"] {
        @include anchor-to-button();
      }

      i {
        display: none !important;
      }

      #topic-title-block {
        @include flex-layout(row);

        a {
          img {
            display: none !important;
          }

          background-image: $forumEdit;
          @include rounded-button(0 10px, $orange);
        }
      }
    }

    form {
      table {
        tr,
        th,
        td {
          border: none !important;
        }

        .posth {
          background: transparent !important;
          height: 30px !important;
          border-radius: 5px !important;

          th {
            position: relative !important;
          }

          td {
            border-radius: 0 5px 5px 0 !important;
            background: $black !important;
          }

          // Default styling for all users (regular users)
          td {
            position: relative !important;
          }

          span:first-child {
            font-size: 0 !important;

            a {
              @include post-header-button($blue);
            }
          }

          // Admin users override
          &.admin {
            .user {
              color: $black !important;
              background: darken($green, 10%) !important;

              &:hover {
                background: $green !important;
              }
            }

            td {
              background: darken($green, 38%) !important;
            }

            span {
              a {
                @include post-header-button($green);
              }
            }
          }

          .user {
            text-decoration: none !important;
            @include element-full-size();
            @include flex-layout();
            transition: background 0.1s ease-in-out;
            color: $black !important;
            background: darken($blue, 10%) !important;
            border-radius: 5px 0 0 5px !important;

            &:hover {
              background: $blue !important;
            }
          }
        }

        .post {
          .avatar_big {
            .rang {
              font-size: 9px !important;
              text-transform: uppercase !important;
            }
          }

          .post-container {
            .text {
              img.linked-image {
                animation: fadeIn 0.5s ease-in-out;
                filter: brightness(0.5) !important;
                transition: filter 0.1s ease-in-out;

                &:hover {
                  filter: brightness(1) !important;
                }
              }
            }
          }

          .post-opts {
            @include flex-layout(row);
            td {
              @include flex-layout(row);

              // Edit button
              a[onclick*="edit"] {
                background-image: $forumEdit;
                @include rounded-button(10px, $green);
              }
            }

            // Reply button
            a[onclick*="reply"] {
              background-image: $forumReply;
              @include rounded-button(10px, $orange);
            }
          }
        }
      }
    }
  }
}
