// Mixin for collapsible panels that start as icon buttons and expand on hover
@mixin collapsible-panel(
  $top: 0,
  $icon: null,
  $icon-color: $lightblue,
  $collapsed-width: 50px,
  $collapsed-height: 50px,
  $expanded-width: 300px,
  $expanded-height: auto,
  $background: $black,
  $transition-duration: 0.15s,
  $content-transition-duration: 0.3s,
  $content-transition-delay: 0.05s
) {
  margin: 0 !important;
  padding: 0 !important;
  border-radius: 0 5px 5px 0 !important;
  color: $white !important;
  position: absolute !important;
  top: $top !important;
  width: $collapsed-width !important;
  height: $collapsed-height !important;
  overflow: hidden !important;
  min-width: unset !important;
  max-width: unset !important;
  transition: width $transition-duration ease-in-out,
    height $transition-duration ease-in-out !important;

  @if $icon {
    background: $background
      icon($icon, $icon-color)
      no-repeat
      center /
      24px !important;
  } @else {
    background: $background !important;
  }

  // Hide content by default
  & * {
    opacity: 0 !important;
    transition: opacity $content-transition-duration ease-in-out !important;
  }

  // Expand on hover
  &:hover {
    width: $expanded-width !important;
    height: $expanded-height !important;
    background: $background !important;

    & * {
      opacity: 1 !important;
      transition: opacity $content-transition-duration ease-in-out
        $content-transition-delay !important;
    }
  }
}

// Usage example:
#content {
  .play-wrapper {
    #play-right {
      display: flex !important;
      flex-direction: column !important;
      position: absolute !important;
      left: 0 !important;
      z-index: 1000 !important;
      width: 0 !important;
      min-width: 0 !important;
      max-width: 0 !important;
      margin: 0 !important;
      padding: 0 !important;

      // Race settings panel
      #params {
        @include collapsible-panel(
          $top: 60px,
          $icon: "sliders",
          $icon-color: $lightblue
        );

        // Specific styles for params panel
        a {
          text-decoration: underline !important;
          border-bottom: none !important;
        }

        select {
          margin: 2px !important;
        }

        .slider {
          background: $darkgray !important;
          border-radius: 10px !important;
          box-sizing: content-box !important;
          display: flex !important;
          align-items: center !important;

          &.off {
            background: $gray !important;
            pointer-events: none !important;
            .handle {
              display: none !important;
            }
          }

          .handle {
            background: $gray !important;
            border-radius: 50% !important;
            height: 14px !important;
            width: 14px !important;
            transition: background 0.15s ease-in-out !important;
            &:hover {
              background: $lightgray !important;
            }
          }
        }
      }

      // Invite friends panel
      #invite {
        @include collapsible-panel(
          $top: 0,
          $icon: "users",
          $icon-color: $lightblue
        );

        // Specific styles for invite panel
        a {
          color: $blue !important;
          &:hover {
            color: $lightblue !important;
          }
        }

        #friends-list {
          background: $darkgray !important;
          border: none !important;
        }

        #select-all {
          border-bottom: none !important;
          text-decoration: underline !important;
        }

        #invite-link {
          color: $blue !important;
          border: none !important;
          border-bottom: 1px solid $gray !important;
          background: none !important;
        }
      }
    }
  }
}
